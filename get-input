#!/usr/bin/env bash

# Detect script directory (resolve symlinks) - portable version
if [ -n "${BASH_SOURCE:-}" ]; then
  SOURCE="${BASH_SOURCE[0]}"
else
  SOURCE="$0"
fi

# Resolve symlinks
while [ -L "$SOURCE" ]; do
  SCRIPT_DIR="$(cd -P "$(dirname "$SOURCE")" && pwd)"
  SOURCE="$(readlink "$SOURCE")"
  case "$SOURCE" in
    /*) ;;
    *) SOURCE="$SCRIPT_DIR/$SOURCE" ;;
  esac
done
SCRIPT_DIR="$(cd -P "$(dirname "$SOURCE")" && pwd)"
DPATH="${REALQUICK_HOME:-$SCRIPT_DIR}"

# Input prompt
prompt="$1"

# Use rofi to display the dmenu for text input
input_text=$(rofi -dmenu -i -p "$prompt")

# If text is entered, output it
if [ -n "$input_text" ]; then
  echo "$input_text"
  mkdir -p "$DPATH/inps"
  echo "$input_text" > "$DPATH/inps/$2"
fi


